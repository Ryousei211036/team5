//==============================================================================================
//
// タイトル　　　title.cpp
// 土田凌聖
//
//==============================================================================================
#include"title.h"
#include"inputkeyboard.h"
#include"application.h"
#include"fade.h"
#include"camera.h"

CCamera *CTitle::m_pCamera = nullptr;

//==============================================================================================
// コンストラクタ
//==============================================================================================
CTitle::CTitle(int nPriority) : CObject(nPriority)
{
}

//==============================================================================================
// デストラクタ
//==============================================================================================
CTitle::~CTitle()
{
}

//==============================================================================================
// 初期化処理
//==============================================================================================
HRESULT CTitle::Init()
{
	// 生成
	m_pCamera = new CCamera;	// カメラ

	// カメラの初期化
	m_pCamera->Init();

	CObject2D *pObject2D = CObject2D::Create({ 1280 / 2, 720 / 2, 0.0f }, { 910.0f, 510.0f, 0.0f });
	pObject2D->SetTexture(CTexture::TEXTURE_TITLE);

	return S_OK;
}

//==============================================================================================
// 終了処理
//==============================================================================================
void CTitle::Uninit()
{
	// カメラの終了
	if (m_pCamera != nullptr)
	{
		m_pCamera->Uninit();
		delete m_pCamera;
		m_pCamera = nullptr;
	}

	Release();
}

//==============================================================================================
//更新処理
//==============================================================================================
void CTitle::Update()
{
	// カメラの更新
	m_pCamera->Update();

	CInputkeyboard *pKeyboard = CApplication::GetInputKeyboard();

	if (pKeyboard->GetKeyboardTrigger(DIK_RETURN))
	{
		CFade::SetFade(CApplication::MODE_GAME, 0.05f);
	}
}

//==============================================================================================
// 描画処理
//==============================================================================================
void CTitle::Draw()
{
	m_pCamera->SetCamera();
}

//==============================================================================================
// 生成処理
//==============================================================================================
CTitle *CTitle::Create()
{
	CTitle *pTitle = nullptr;

	pTitle = new CTitle;

	if (pTitle != nullptr)
	{
		pTitle->Init();
	}

	return pTitle;
}